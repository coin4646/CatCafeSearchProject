<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" href="catCafe.css">
    <link href="https://fonts.googleapis.com/css?family=Jua&display=swap" rel="stylesheet">

    <title>집사의 민족</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Jua', sans-serif;
        }

        .main-title {
            font-size: 70px;
            font-weight: bold;
            color: rgb(252, 180, 180);
        }

        .title-text {
            font-size: 25px;
            color: rgb(253, 236, 236);
        }

        .breadcrumb {
            padding-top: 20px;
            padding-bottom: 20px;

        }

        .breadcrumb-item {
            font-size: 19px;

        }

        .card {
            display: block;
            margin-right: auto;
            margin-left: auto
        }

        .title-wrap {
            height: 250px;
            background-position: top left;
            background-size: 25%;
            background-repeat: repeat;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;

        }

        

        .text-wrap {
            text-align: center;

        }

        .text-border {
            text-shadow: -1px 0 rgb(82, 81, 81), 0 1px rgb(82, 81, 81), 1px 0 rgb(82, 81, 81), 0 -1px rgb(82, 81, 81);
        }
    </style>

</head>

<body>
    <div class="title-wrap">
        <div class="text-wrap">
            <h1 class="main-title text-border">집사의 민족</h1>
            <p class="title-text text-border"> 서울시 모든 고양이 카페 정보를 한눈에!</p>
        </div>
    </div>
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item active GangNam" aria-current="page">강남구</li>
            <li class="breadcrumb-item active GangDong" aria-current="page">강동구</li>
            <li class="breadcrumb-item active GangBook" aria-current="page">강북구</li>
            <li class="breadcrumb-item active GangSeo" aria-current="page">강서구</li>
            <li class="breadcrumb-item active GanAk" aria-current="page">관악구</li>
            <li class="breadcrumb-item active GangJin" aria-current="page">광진구</li>
            <li class="breadcrumb-item active Guro" aria-current="page">구로구</li>
            <li class="breadcrumb-item active GuemCheon" aria-current="page">금천구</li>
            <li class="breadcrumb-item active NoWoun " aria-current="page">노원구</li>
            <li class="breadcrumb-item active DoBong" aria-current="page">도봉구</li>
            <li class="breadcrumb-item active DongDaeMoon" aria-current="page">동대문구</li>
            <li class="breadcrumb-item active DongJak" aria-current="page">동작구</li>
            <li class="breadcrumb-item active Mapo" aria-current="page">마포구</li>
            <li class="breadcrumb-item active SeoDaeMoon" aria-current="page">서대문구</li>
            <li class="breadcrumb-item active SeoCho" aria-current="page">서초구</li>
            <li class="breadcrumb-item active SeoungDong" aria-current="page">성동구</li>
            <li class="breadcrumb-item active SeoungBook" aria-current="page">성북구</li>
            <li class="breadcrumb-item active Songpa" aria-current="page">송파구</li>
            <li class="breadcrumb-item active YangCheon" aria-current="page">양천구</li>
            <li class="breadcrumb-item active YoungDengPo" aria-current="page">영등포구</li>
            <li class="breadcrumb-item active YoongSan" aria-current="page">용산구</li>
            <li class="breadcrumb-item active EunPeung" aria-current="page">은평구</li>
            <li class="breadcrumb-item active JongRo" aria-current="page">종로구</li>
            <li class="breadcrumb-item active Jung" aria-current="page">중구</li>
            <li class="breadcrumb-item active JungRang" aria-current="page">중랑구</li>
        </ol>
    </nav>
    <div>
        <div id="cafe-box">

        </div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
        integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>

    <script>
        $(document).ready(function () {
            listing();
        });

        function listing() {
            console.log('화면 로딩 후 잘 실행되었습니다');
        }


        function show_star() {
            // 1. #star_box의 내부 html 태그를 모두 삭제합니다.
            // 2. 서버에 1) GET 방식으로, 2) /api/list 라는 주소로 stars_list를 요청합니다.
            // 3. 서버가 돌려준 stars_list를 stars라는 변수에 저장합니다.
            // 4. for 문을 활용하여 stars 배열의 요소를 차례대로 조회합니다.
            // 5. stars[i] 요소의 name, url, img_url, recent, like 키 값을 활용하여 값을 조회합니다.
            // 6. 영화인 카드를 만듭니다.
            // 7. #star-box에 temp_html을 붙입니다.


            $.ajax({
                type: 'GET',
                url: '/api/list',
                data: {},
                success: function (response) {
                    let cafes = response['cafes_list']
                    console.log(cafes)
                    for (let i = 0; i < cafes.length; i++) {
                        let cafe = cafes[i];
                        let name = cafe['name'];
                        let blogNum = cafe['blogNum'];
                        let imgUrl = cafe['image'];
                        let price = cafe['price'];
                        let cafeUrl = cafe['url'];
                        let address = cafe['address'];
                        let mapUrl = cafe['mapUrl'];


                        let temp_html = `<div class="card mb-3" style="max-width: 600px;">
                                        <div class="row no-gutters">
                                            <div class="col-md-4">
                                                <img src="${imgUrl}" class="card-img" alt="...">
                                            </div>
                                            <div class="col-md-8">
                                                <div class="card-body">
                                                    <h5 class="card-title">${name}</h5>
                                                    <p class="card-price">${price}</p>
                                                    <p class="card-address">주소 - ${address}  <a href="${mapUrl}" class="card-map" target="_blank">지도보기</a></p>

                                                    <p class="card-reviewCount">블로그 리뷰수 - ${blogNum}</p>
                                                    <a href="${cafeUrl}" class="card-review" target="_blank" >상세정보 둘러보기</a>
                                                    <p class="card-point">평점</p>
                                                    <p class="card-givePoint">평점주기</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>`
                        
                        $('#cafe-box').append(temp_html);

                    }
                }
            });
        }



        //배경 바꾸어 주는 부분
        const titlePart = document.querySelector(".title-wrap");

        function callRanNum() {
            ranNum = Math.floor((Math.random() * 7) + 1);
            return ranNum;
        }

        function loadPhoto() {
            ranNum = callRanNum();
            url = `../../background-image/${ranNum}.jpg`
            titlePart.style.backgroundImage = `url(${url})`;
        }

        function init() {
            loadPhoto();
        }

        init();
        show_star();
        
    </script>
</body>

</html>